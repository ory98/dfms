<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="member">
	
	<select id="selectLogin" resultType="MemberDto" parameterType="String">
		SELECT 
				* 
		FROM 
				MEMBER 
		WHERE 
				MEMBER_ID = #{memberId}		
	
	</select>
	
	<select id="selectMemberId" resultType="MemberDto" parameterType="memberDto">
	  		SELECT
	  				*
	  		FROM
	  				MEMBER
	  		WHERE
	  				EMAIL = #{email} AND MEMBER_NM = #{memberNm}
  	</select>
  	
  	<update id="updatePw" parameterType="MemberDto">
		UPDATE 
	   			MEMBER
	    SET
	         	PASSWD = #{passwd}
	  	WHERE 
				MEMBER_ID = #{memberId} 
	</update>
	
	<select id="selectPoint" resultType="int" parameterType="String">
	  		SELECT
	  				POINT
	  		FROM
	  				MEMBER
	  		WHERE
	  				MEMBER_ID = #{memberId}
  	</select>
	
	<select id="selectDuplicatedId" parameterType="String" resultType="String">
	   SELECT 
	   			MEMBER_ID
	   FROM 
	   			MEMBER
	   WHERE 
	   			MEMBER_ID = #{memberId}
	</select>
	
	<insert id="insertMember" parameterType="memberDto">
    	INSERT INTO 
    			MEMBER 
    	VALUES (
				#{memberId},
				#{memberNm},
				#{passwd},
               	#{dateBirth},
               	#{hp},
                #{smsstsYn},
                #{email},
                #{emailstsYn},
                #{zipcode},
                #{roadAddress},
                #{jibunAddress},
                #{namujiAddress},
                0,
                NOW()
        )
  	</insert>
  	
  	<select id="selectMyHeartCnt" resultType="int" parameterType="String">
	  		SELECT
	  				COUNT(*)
	  		FROM
	  				HEART
	  		WHERE
	  				MEMBER_ID = #{memberId}
  	</select>
  	
  	<select id="selectMyCartCnt" resultType="int" parameterType="String">
	  		SELECT
	  				COUNT(*)
	  		FROM
	  				CART
	  		WHERE
	  				MEMBER_ID = #{memberId}
  	</select>
  	
</mapper>